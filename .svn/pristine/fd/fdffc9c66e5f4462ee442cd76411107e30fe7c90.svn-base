<div class="container">
  <div class="epeople-registry row">
    <div class="col-lg-9">
        <h3 id="search" class="border-bottom pb-2">Table of Content
        </h3>
    </div>
    <div class="col-lg-3">
        <button type="button" (click)="hideshowFrom()" class=" btn btn-primary">
          <i class="fas fa-plus"></i>Add Primary level
        </button>
    </div>
  </div>
  <div [hidden]="!hideshow">
  <form [formGroup]="DocumentypeTempletForm" novalidate>
    <div class="row">
      <div class="col-1">
        <label>Name </label>
      </div>
      <div class="col-6">        
        <select name="name" id="name" [(ngModel)]="selectednodefromOption" formControlName="name" 
              class="form-control" aria-label="Search scope">
              <option [ngValue]="undefined">Add a parameter...</option>
              <option *ngFor="let documentype of  documentTypes"  [ngValue]="documentype">
                  {{documentype.documenttypename}}
              </option>
           </select>
      </div>
    </div>
    
    <div class="row mt-3">
      <div class="col-1">
      </div>
      <div class="col-2">
        <label>Date </label>
      </div>
      <div class="col-1">
        <input class="form-control" formControlName="isDate" type="checkbox">
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-1">
      </div>
      <div class="col-2">
        <label>Remark </label>
      </div>
      <div class="col-1">
        <input class="form-control" formControlName="isRemark" type="checkbox">
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-1">
      </div>
      <div class="col-2">
        <label>Description </label>
      </div>
      <div class="col-1">
        <input class="form-control" formControlName="isDescription" type="checkbox">
      </div>
     
    </div>
    <div class="row mt-3">
      <div class="col-1">
      </div>
      <div class="col-2">
        <label>Sub Child </label>
      </div>
     
      <div class="col-1">
        <input class="form-control" formControlName="hasSubChild" type="checkbox">
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-1">
      </div>
      <div class="col-2">
        <label>Non-repetitive </label>
      </div>
    
      <div class="col-1">
        <input class="form-control" formControlName="nonrepetitive" type="checkbox">
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-1">
      </div>
      <div class="col-6">
        <button type="button" (click)="cancle()" class=" btn btn-warning">
         Cancle
        </button>
        <button type="button" *ngIf="!isUpdate" (click)="onAdd()" class="btn-success btn btn-primary">
          <i class="fas fa-plus"></i>Save
        </button>
        <button type="button" *ngIf="isUpdate" (click)="update()" class="btn-success btn btn-primary">
          <i class="fas fa-plus"></i>update
        </button>
      </div>
    </div>
  </form>
  </div>
  <div class="row"  [hidden]="hideshow">
    <div class="col-12">
      <tree-root #tree [focused]="true" [nodes]="nodeItems" [options]="treeOptions" cdkDropListGroup>       
        <ng-template #treeNodeWrapperTemplate let-node let-index="index" let-templates="templates">
          <div class="node-wrapper" id={{index}} [style.padding-left]="node.getNodePadding()" (click)="clickedCatch(index)" cdkDropList (cdkDropListDropped)="drop($event,node,index)" >            
            <div style="width: 100%;"  class="node-content-wrapper  " [class.node-content-wrapper-active]="node.isActive"
               (click)="node.mouseAction('click', $event)"
              (dblclick)="node.mouseAction('dblClick', $event)" (contextmenu)="node.mouseAction('contextMenu', $event)"
              (treeDrop)="node.onDrop($event)" [treeAllowDrop]="node.allowDrop" [treeDrag]="node"
              [treeDragEnabled]="node.allowDrag()"cdkDrag   (drag)="clickedCatch(index)">
              <tree-node-content [node]="node" [index]="index" [template]="treeNodeTemplate"  ></tree-node-content>
            </div>
          </div>
        </ng-template>
        <ng-template #treeNodeTemplate let-node let-index="index" >
          <div class="container-fluid">
          <div class="row mt-3" >           
            <div class="col-lg-1">
              <div style="color: #6C757D"
              *ngIf="node.data.hasChildren">
              <i *ngIf="node.isCollapsed" (click)="getChildren(node)" class="fa fa-chevron-right"></i>
              <i *ngIf="node.isExpanded"  (click)="node.toggleExpanded()"  class="fa fa-chevron-down"></i>
            </div>
            </div>
            <div class="col-lg-3">
              <h5> {{ node.data.documentType.documenttypename  }}</h5>
            </div>
            
            <div class="col-lg-1">
              <span
              [ngClass]="node.data.isDate ? 'badge badge-success ng-star-inserted' : 'badge badge-danger ng-star-inserted'"
              style="font-size: 94% !important;">Date </span>
            </div>
            <!-- <div class="col-lg-1">
              <span
                [ngClass]="node.data.isRemark ? 'badge badge-success ng-star-inserted' : 'badge badge-danger ng-star-inserted'"
                style="font-size: 94% !important;">Remark</span>
            </div> -->
            <div class="col-lg-1">
              <span
                [ngClass]="node.data.isDescription ? 'badge badge-success ng-star-inserted' : 'badge badge-danger ng-star-inserted'"
                style="font-size: 94% !important;">Description</span>
            </div>
                <div class="col-lg-1">
                  <span
                    [ngClass]="node.data.hasSubChild ? 'badge badge-success ng-star-inserted' : 'badge badge-danger ng-star-inserted'"
                    style="font-size: 94% !important;">Sub Child</span>
                    
                </div>
                <div class="col-lg-1">
                 
                  <span
                    [ngClass]="node.data.nonrepetitive ? 'badge badge-success ng-star-inserted' : 'badge badge-danger ng-star-inserted'"
                    style="font-size: 94% !important;">Non-repetitive</span>
                </div>
                
            <div class="col-lg-4" *ngIf="node.data.isRootOfmaster" style="text-align: center;">             
              <span class="btn btn-primary mr-2" *ngIf="node.data.index > 0" style="cursor: pointer;"  (click)="moveNodeUp(node)"><i  class="fas  fa-lg fa-arrow-up"></i></span>              
              <span class="btn btn-primary mr-2" *ngIf="node.data.index != node.treeModel.nodes.length-1"  style="cursor: pointer;"  (click)="moveNodeDown(node)"><i  class="fas  fa-lg fa-arrow-down "></i></span>                   
              <span class="btn btn-primary mr-2"  style="cursor: pointer;" title="Add Child" (click)="onActivateNode(node,false)"><i  class="fas  fa-lg fa-plus"></i></span>
              <span class="btn btn-primary mr-2"  style="cursor: pointer;" title="Add Child" (click)="onActivateNode(node,true)"><i  class="fas  fa-lg fa-pen"></i></span>
              <span class="btn btn-danger" style="cursor: pointer;" *ngIf="node.data.hasChildren == false" (click)="deleteNode(node)"><i  class="fas  fa-lg fa-trash"></i></span>                               
            </div>
            
            <div class="col-4" *ngIf="!node.data.isRootOfmaster" style="text-align: center;">              
              <span class="btn btn-primary mr-2" *ngIf="node.data.index > 0" style="cursor: pointer;"  (click)="moveNodeUp(node)"><i  class="fas  fa-lg fa-arrow-up"></i></span>              
              <span class="btn btn-primary mr-2" *ngIf="node.data.index != node.parent?.children[node.parent?.children?.length-1].data.index"  style="cursor: pointer;"  (click)="moveNodeDown(node)"><i  class="fas  fa-lg fa-arrow-down "></i></span>
              <span class="btn btn-primary mr-2"  style="cursor: pointer;" title="Add Child" (click)="onActivateNode(node,false)"><i  class="fas  fa-lg fa-plus"></i></span>
              <span class="btn btn-primary mr-2"  style="cursor: pointer;" title="Add Child" (click)="onActivateNode(node,true)"><i  class="fas  fa-lg fa-pen"></i></span>
              <span class="btn btn-danger" style="cursor: pointer;" *ngIf="node.data.hasChildren == false" (click)="deleteNode(node)"><i  class="fas  fa-lg fa-trash"></i></span>              
            </div>
                        
          </div>
        </div>
        </ng-template>
      </tree-root>

    </div>
  </div>
</div>